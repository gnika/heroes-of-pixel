var Loader={images:{}};Loader.loadImage=function(e,n){var i=new Image,t=new Promise(function(t,o){i.onload=function(){this.images[e]=i,t(i)}.bind(this),i.onerror=function(){o("Could not load image: "+n)}}.bind(this));return i.src=n,t},Loader.getImage=function(e){return e in this.images?this.images[e]:null};var Keyboard={};Keyboard.LEFT=37,Keyboard.RIGHT=39,Keyboard.UP=38,Keyboard.DOWN=40,Keyboard._keys={},Keyboard.listenForEvents=function(e){window.addEventListener("keydown",this._onKeyDown.bind(this)),window.addEventListener("keyup",this._onKeyUp.bind(this)),e.forEach(function(e){this._keys[e]=!1}.bind(this))},Keyboard._onKeyDown=function(e){var n=e.keyCode;n in this._keys&&(e.preventDefault(),this._keys[n]=!0)},Keyboard._onKeyUp=function(e){var n=e.keyCode;n in this._keys&&(e.preventDefault(),this._keys[n]=!1)},Keyboard.isDown=function(e){if(!e in this._keys)throw new Error("Keycode "+e+" is not being listened to");return this._keys[e]};var Game={};Game.run=function(e){this.ctx=e,this._previousElapsed=0;var n=this.load();Promise.all(n).then(function(e){this.init(),window.requestAnimationFrame(this.tick)}.bind(this))},Game.tick=function(e){window.requestAnimationFrame(this.tick),this.ctx.clearRect(0,0,512,512);var n=(e-this._previousElapsed)/1e3;n=Math.min(n,.25),this._previousElapsed=e,this.update(n),this.render()}.bind(Game),Game.init=function(){},Game.update=function(e){},Game.render=function(){},window.onload=function(){var e=document.getElementById("demo").getContext("2d");Game.run(e)};