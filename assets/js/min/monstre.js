function Monstre(i,t,s,h,o,e,r,n,a,l,c,d,m,p){this.map=i,this.level=a,this.attaque=e,this.defense=r,this.regeneration=n,this.x=t,this.y=s,this.row=h,this.col=o,this.life=60,this.width=i.tsize,this.height=i.tsize,this.image=l,this.image1=l,this.image2=c,this.vitesse=d,this.directionX=m,this.directionY=p,this.collisionHero=0}function generateTroll(i,t,s,h){this.nameTroll=new Monstre(map,i,t,s,h,22,18,.5,2,"troll3","troll2",0,0,0),monsters[s+"-"+h]=this.nameTroll}function generateMonstre(i,t,s,h,o,e,r,n,a,l,c,d,m,p){this.nameTroll=new Monstre(i,t,s,h,o,e,r,n,a,l,c,d,m,p),monsters[h+"-"+o]=this.nameTroll}Monstre.SPEED=50,Monstre.prototype.move=function(i,t,s){if(this.x+=this.directionX*this.vitesse*Monstre.SPEED*i,this.y+=this.directionY*this.vitesse*Monstre.SPEED*i,pos=this.map.getRow(this.y)*this.map.rows+this.map.getCol(this.x),1==this.directionX)h=abs2[pos+1];if(-1==this.directionX)h=abs2[pos];if(1==this.directionY)h=abs2[pos+this.map.rows];if(-1==this.directionY)var h=abs2[pos];var o=this.map.isHeroTileAtXY(t,s),e=this.map.getRow(this.y)+1,r=this.map.getRow(this.y)-1,n=this.map.getCol(this.x)+1,a=this.map.getCol(this.x)-2;if(o[0]!=n&&o[0]!=a&&o[0]!=this.map.getCol(this.x)||o[1]!=e&&o[1]!=r&&o[1]!=this.map.getRow(this.y)){1==this.collisionHero&&(this.directionX=olddirectionX,this.directionY=olddirectionY,this.collisionHero=0);(3===h||5===h||6===h||7===h||16===h||17===h)&&(-1==this.directionX?this.directionX=1:1==this.directionX&&(this.directionX=-1),-1==this.directionY?this.directionY=1:1==this.directionY&&(this.directionY=-1));var l=this.map.cols*this.map.tsize,c=this.map.rows*this.map.tsize;this.x=Math.max(0,Math.min(this.x,l)),this.y=Math.max(0,Math.min(this.y,c)),this.col==Math.round(this.y/this.map.tsize)&&this.row==Math.round(this.x/this.map.tsize)||(monsters[Math.round(this.x/this.map.tsize)+"-"+Math.round(this.y/this.map.tsize)]=this,delete monsters[this.row+"-"+this.col]),this.row=Math.round(this.x/this.map.tsize),this.col=Math.round(this.y/this.map.tsize)}else 0==this.collisionHero&&(this.collisionHero=1,olddirectionX=this.directionX,olddirectionY=this.directionY,this.directionX=0,this.directionY=0)};