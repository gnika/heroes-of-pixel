function Monstre(t,i,s,h,e,o,r,a,n,m,p,l,d,c){this.map=t,this.level=n,this.attaque=o,this.defense=r,this.regeneration=a,this.x=i,this.y=s,this.row=h,this.col=e,this.life=60,this.width=t.tsize,this.height=t.tsize,this.image=m,this.image1=m,this.image2=p,this.vitesse=l,this.directionX=d,this.directionY=c,this.collisionHero=0,this.name="monstre"+h+"-"+e}function generateTroll(t,i,s,h){this.nameTroll=new Monstre(map,t,i,s,h,22,18,.5,2,"troll3","troll2",0,0,0),monsters[s+"-"+h]=this.nameTroll}function generateMonstre(t,i,s,h,e,o,r,a,n,m,p,l,d,c){this.nameTroll=new Monstre(t,i,s,h,e,o,r,a,n,m,p,l,d,c),monsters[h+"-"+e]=this.nameTroll}Monstre.SPEED=50,Monstre.prototype.move=function(t,i,s){if(this.x+=this.directionX*this.vitesse*Monstre.SPEED*t,this.y+=this.directionY*this.vitesse*Monstre.SPEED*t,pos=this.map.getRow(this.y)*this.map.rows+this.map.getCol(this.x),10!=abs2[pos]&&11!=abs2[pos]&&12!=abs2[pos]&&13!=abs2[pos]||(abs2[pos]=2),1==this.directionX)var h=abs2[pos+1],e=abs1[pos+1],o=1;if(-1==this.directionX)var h=abs2[pos],e=abs1[pos],o=0;if(1==this.directionY)var h=abs2[pos+this.map.rows],e=abs1[pos+this.map.rows],o=0;if(-1==this.directionY)var h=abs2[pos],e=abs1[pos],o=0;6!=h&&7!=h||builds[parseInt(this.map.getCol(this.x),10)+o+"-"+this.map.getRow(this.y)]&&(builds[parseInt(this.map.getCol(this.x),10)+o+"-"+this.map.getRow(this.y)].life=builds[parseInt(this.map.getCol(this.x),10)+o+"-"+this.map.getRow(this.y)].life-this.attaque,builds[parseInt(this.map.getCol(this.x),10)+o+"-"+this.map.getRow(this.y)].life<=0&&(abs2[pos]=2,anim=new animation(map,builds[parseInt(this.map.getCol(this.x),10)+o+"-"+this.map.getRow(this.y)].x,builds[parseInt(this.map.getCol(this.x),10)+o+"-"+this.map.getRow(this.y)].y,"cloud"),delete builds[parseInt(this.map.getCol(this.x),10)+o+"-"+this.map.getRow(this.y)]));var r=this.map.isHeroTileAtXY(i,s),a=this.map.getRow(this.y)+1,n=this.map.getRow(this.y)-2,m=this.map.getCol(this.x)+1,p=this.map.getCol(this.x)-2;if(monsters[m+"-"+a]||monsters[p+"-"+n]||monsters[p+"-"+n]||monsters[p+"-"+this.map.getRow(this.y)]||monsters[this.map.getCol(this.x)+"-"+n]||monsters[p+"-"+this.map.getRow(this.y)])return-1==this.directionX?this.directionX=1:1==this.directionX&&(this.directionX=-1),void(-1==this.directionY?this.directionY=1:1==this.directionY&&(this.directionY=-1));if(r[0]!=m&&r[0]!=p&&r[0]!=this.map.getCol(this.x)||r[1]!=a&&r[1]!=n&&r[1]!=this.map.getRow(this.y)){1==this.collisionHero&&(this.directionX=olddirectionX,this.directionY=olddirectionY,this.collisionHero=0);(3===h||5===h||6===h||7===h||16===h||17===h||4===h&&3===e)&&(-1==this.directionX?this.directionX=1:1==this.directionX&&(this.directionX=-1),-1==this.directionY?this.directionY=1:1==this.directionY&&(this.directionY=-1));var l=this.map.cols*this.map.tsize,d=this.map.rows*this.map.tsize;this.x=Math.max(0,Math.min(this.x,l)),this.y=Math.max(0,Math.min(this.y,d)),this.col==Math.round(this.y/this.map.tsize)&&this.row==Math.round(this.x/this.map.tsize)||(monsters[Math.round(this.x/this.map.tsize)+"-"+Math.round(this.y/this.map.tsize)]=this,delete monsters[this.row+"-"+this.col]),this.row=Math.round(this.x/this.map.tsize),this.col=Math.round(this.y/this.map.tsize)}else 0==this.collisionHero&&(this.collisionHero=1,olddirectionX=this.directionX,olddirectionY=this.directionY,this.directionX=0,this.directionY=0)};