function Monstre(i,t,s,h,o,e,r,n,a,l,d,m,p,c){this.map=i,this.level=a,this.attaque=e,this.defense=r,this.regeneration=n,this.x=t,this.y=s,this.row=h,this.col=o,this.life=60,this.width=i.tsize,this.height=i.tsize,this.image=l,this.image1=l,this.image2=d,this.vitesse=m,this.directionX=p,this.directionY=c,this.collisionHero=0,this.name="monstre"+h+"-"+o}function generateTroll(i,t,s,h){this.nameTroll=new Monstre(map,i,t,s,h,22,18,.5,2,"troll3","troll2",0,0,0),monsters[s+"-"+h]=this.nameTroll}function generateMonstre(i,t,s,h,o,e,r,n,a,l,d,m,p,c){this.nameMonstre=new Monstre(i,t,s,h,o,e,r,n,a,l,d,m,p,c),monsters[h+"-"+o]=this.nameMonstre}Monstre.SPEED=50,Monstre.prototype.move=function(i,t,s){if(this.x+=this.directionX*this.vitesse*Monstre.SPEED*i,this.y+=this.directionY*this.vitesse*Monstre.SPEED*i,pos=this.map.getRow(this.y)*this.map.rows+this.map.getCol(this.x),10!=abs2[pos]&&11!=abs2[pos]&&12!=abs2[pos]&&13!=abs2[pos]||(abs2[pos]=2),1==this.directionX)var h=abs2[pos+1],o=abs1[pos+1],e=1;if(-1==this.directionX)var h=abs2[pos],o=abs1[pos],e=0;if(1==this.directionY)var h=abs2[pos+this.map.rows],o=abs1[pos+this.map.rows],e=0;if(-1==this.directionY)var h=abs2[pos],o=abs1[pos],e=0;6!=h&&7!=h||builds[parseInt(this.map.getCol(this.x),10)+e+"-"+this.map.getRow(this.y)]&&(builds[parseInt(this.map.getCol(this.x),10)+e+"-"+this.map.getRow(this.y)].life=builds[parseInt(this.map.getCol(this.x),10)+e+"-"+this.map.getRow(this.y)].life-this.attaque,builds[parseInt(this.map.getCol(this.x),10)+e+"-"+this.map.getRow(this.y)].life<=0&&(abs2[pos]=2,anim=new animation(map,builds[parseInt(this.map.getCol(this.x),10)+e+"-"+this.map.getRow(this.y)].x,builds[parseInt(this.map.getCol(this.x),10)+e+"-"+this.map.getRow(this.y)].y,"cloud"),delete builds[parseInt(this.map.getCol(this.x),10)+e+"-"+this.map.getRow(this.y)]));var r=this.map.isHeroTileAtXY(t,s),n=this.col+1,a=this.col-1,l=this.row+1,d=this.row-1;if(0!=this.directionX&&(monsters[d+"-"+this.col]||monsters[l+"-"+this.col])||0!=this.directionY&&(monsters[this.row+"-"+a]||monsters[this.row+"-"+n]))return-1==this.directionX?this.directionX=1:1==this.directionX&&(this.directionX=-1),void(-1==this.directionY?this.directionY=1:1==this.directionY&&(this.directionY=-1));if(r[0]!=l&&r[0]!=d&&r[0]!=this.map.getCol(this.x)||r[1]!=n&&r[1]!=a&&r[1]!=this.map.getRow(this.y)){1==this.collisionHero&&(this.directionX=olddirectionX,this.directionY=olddirectionY,this.collisionHero=0);(3===h||5===h||6===h||7===h||16===h||17===h||4===h&&3===o)&&(-1==this.directionX?this.directionX=1:1==this.directionX&&(this.directionX=-1),-1==this.directionY?this.directionY=1:1==this.directionY&&(this.directionY=-1));var m=this.map.cols*this.map.tsize,p=this.map.rows*this.map.tsize;this.x=Math.max(0,Math.min(this.x,m)),this.y=Math.max(0,Math.min(this.y,p)),this.col==Math.round(this.y/this.map.tsize)&&this.row==Math.round(this.x/this.map.tsize)||(monsters[Math.round(this.x/this.map.tsize)+"-"+Math.round(this.y/this.map.tsize)]=this,delete monsters[this.row+"-"+this.col]),this.row=Math.round(this.x/this.map.tsize),this.col=Math.round(this.y/this.map.tsize)}else 0==this.collisionHero&&(this.collisionHero=1,olddirectionX=this.directionX,olddirectionY=this.directionY,this.directionX=0,this.directionY=0)};