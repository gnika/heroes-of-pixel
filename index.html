<!doctype html>
<html>

<head>
    <title>Heroes of pixel</title>
	<meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css"> -->
    <!-- <link rel="stylesheet" href="assets/css/min/styles.css" type="text/css"> -->
    <link rel="stylesheet" href="assets/css/bootstrap.css" type="text/css">
    <link rel="stylesheet" href="assets/css/styles.css" type="text/css">

	
     <!--<script src="assets/js/min/common.js"></script>
     <script src="assets/js/min/map.js"></script>
     <script src="assets/js/min/logic-grid.js"></script>
     <script src="assets/js/min/building.js"></script>
     <script src="assets/js/min/hero.js"></script> 
     <script src="assets/js/min/artefact.js">
     <script src="assets/js/min/monstre.js"></script>
     <script src="assets/js/min/time.js"></script>
     <script src="assets/js/min/menu.js"></script>
     <script src="assets/js/min/images.js"></script>
     <script src="assets/js/min/dialogues.js">
	 </script>-->
	 
     <script src="assets/js/common.js"></script>
     <script src="assets/js/logic-grid.js"></script>
     <script src="assets/js/building.js"></script>
     <script src="assets/js/hero.js"></script>
     <script src="assets/js/artefact.js"></script>
     <script src="assets/js/monstre.js"></script>
     <script src="assets/js/menu.js"></script>
     <script src="assets/js/time.js"></script>
     <script src="assets/js/images.js"></script>
     <script src="assets/js/map.js"></script>
     <script src="assets/js/map2.js"></script>
     <script src="assets/js/map3.js"></script>
     <script src="assets/js/maproom1.js"></script>
     <script src="assets/js/maproom3.js"></script>
     <script src="assets/js/dialogues.js"></script>
     <script src="assets/js/graph.js"></script>
     <script src="assets/js/astar.js"></script>
     <script src="assets/js/paysan.js"></script>
     <script src="assets/js/save.js"></script>
</head>

<body>
    <div class="container">
	<div style="width: 100%;">
	<div style="float: left; padding-right: 50px;" id="gameTime"></div>
	 <a href="javascript:return false;" style="float: left;padding-right: 10px;" onclick="AjouterFavoris();return false;" id="save">Sauvegarder le site</a>
	 <a href="return false;" style="display: none;" id="saveClick">Enregistrer ce lien dans vos favoris pour sauvegarder votre partie</a>
		<!--<div style="display: inline; float: left; padding-right: 2%; padding-left: 5px;">
			<div id="passNiveau"> Passer le niveau</div> <div id="inv" style="visibility: hidden;"><input type="text" id="code"/> <button id="pass">Ok</button></div>
		</div>-->
		<!--text-center-->
		<div  style="text-align: center;> <!--text-center-->
			<div class=" btn-group" role="group"><!--text-center-->
				<div>
					<!-- <button type="button" class="btn btn-danger btn-xs" id="speed0">||</button> -->
					<button type="button" class="btn btn-success btn-xs hidden" id="speed1">></button>
					<button type="button" class="btn btn-success btn-xs hidden" id="speed2">>></button>
					<button type="button" class="btn btn-success btn-xs hidden" id="speed3">>>></button>
				</div>
			</div>
			
		
					<canvas id="map_canvas" width="1580" height="768"></canvas>
		</div>		
			
	</div>

		<!-- <footer class="main-footer"> -->
			<!-- Heroes of pixel : 3 mad devs on it ! -->
		<!-- </footer> -->

</body>

     <script src="assets/js/menu.js"></script>
     <script>
		<!-- document.getElementById("passNiveau").addEventListener('click', -->
		<!-- function(event){ -->
		<!-- if(document.getElementById("inv").style.visibility == 'hidden') -->
			<!-- document.getElementById("inv").style.visibility = 'visible'; -->
		<!-- else -->
			<!-- document.getElementById("inv").style.visibility = 'hidden'; -->
		<!-- }) -->
		<!-- document.getElementById("pass").addEventListener('click', -->
		<!-- function(event){ -->
			<!-- if(document.getElementById("code").value == 'atreides'){//atreides -->
				<!-- builds		= []; -->
				<!-- monsters 	= []; -->
				<!-- artefacts 	= []; -->
				<!-- niveauMap = 2; -->
				<!-- generateMap2(); -->
			<!-- } -->
			<!-- if(document.getElementById("code").value == 'ordos'){//ordos -->
				<!-- builds		= []; -->
				<!-- monsters 	= []; -->
				<!-- artefacts 	= []; -->
				<!-- niveauMap = 3; -->
				<!-- generateMap3(); -->
			<!-- } -->
			<!-- document.getElementById("code").value = '';	 -->
		<!-- }) -->
		
		
		
		
		
		function AjouterFavoris(){
			
			var save = [];
			var monstres = [];
			Object.keys(monsters).forEach(function(key) {
				var ms = [];
				ms.push(monsters[key].directionX);
				ms.push(monsters[key].directionY);
				ms.push(monsters[key].vitesse);
				ms.push(monsters[key].col);
				ms.push(monsters[key].row);
				ms.push(monsters[key].x);
				ms.push(monsters[key].y);
				ms.push(monsters[key].idQuete);
				ms.push(monsters[key].image1);
				monstres.push(ms);
			})
			var batiments = [];
			Object.keys(builds).forEach(function(key) {
				var ms = [];
				var caractEntrees = [];
				var caractValues = [];
				caract = builds[key].caracteristique;
				Object.keys(caract).forEach(function(key) {
					caractEntrees.push(key);
					caractValues.push(caract[key]);
				})
				ms.push(builds[key].x);
				ms.push(builds[key].y);
				ms.push(builds[key].row);
				ms.push(builds[key].col);
				ms.push(builds[key].name);
				ms.push(builds[key].life);
				ms.push(caractEntrees);
				ms.push(builds[key].typeTile);
				ms.push(builds[key].solid);
				ms.push(builds[key].batiment);
				ms.push(caractValues);
				batiments.push(ms);
			})
			var artefactMap = [];
			<!-- console.log(artefacts); -->
			Object.keys(artefacts).forEach(function(key) {
				var ms = [];
				ms.push(artefacts[key].x);
				ms.push(artefacts[key].y);
				ms.push(artefacts[key].col);
				ms.push(artefacts[key].row);
				ms.push(artefacts[key].image);
				artefactMap.push(ms);
			})
			var hero  = [];
			var equipEntrees = [];
			var equipValues = [];

			Object.keys(Game.hero.equipement).forEach(function(key) {
				
				equipEntrees.push(key);
				equipValues.push(Game.hero.equipement[key]);
			})
			
			hero.push(Game.hero.agilite);
			hero.push(Game.hero.attaque);
			hero.push(Game.hero.attaqueEnCours);
			hero.push(Game.hero.defense);
			hero.push(Game.hero.x);
			hero.push(Game.hero.y);
			hero.push(Game.hero.life);
			hero.push(Game.hero.fatigue);
			hero.push(Game.hero.exploration);
			hero.push(Game.hero.artefact);
			hero.push(Game.hero.artefactEnCours);
			hero.push(Game.hero.supply);
			hero.push(equipEntrees);
			hero.push(equipValues);
			
			
			var mapa = [];
			
			
			var abs1S =[];
			var abs2S =[];
			var absobs1S =[];
			var absobs2S =[];
			for(var i=0; i<abs1Save.length; i++){
				if(abs1Save[i] != abs1[i])
					abs1S.push(i+':'+ abs1[i]);
			}
			for(var i=0; i<abs2Save.length; i++){
				if(abs2Save[i] != abs2[i])
					abs2S.push(i+':'+ abs2[i]);
			}
			for(var i=0; i<absobs1.length; i++){
				if(absobs1[i] != 7 && i > 48)			// 7 = tuile inexplorée
					absobs1S.push(i+':'+ absobs1[i]);
			}
			for(var i=0; i<absobs2.length; i++){
				if(absobs2[i] != 7 && i > 48)			// 7 = tuile inexplorée
					absobs2S.push(i+':'+ absobs2[i]);
			}
			

			mapa.push(abs1S);
			mapa.push(abs2S);
			mapa.push(absobs1S);
			mapa.push(absobs2S);
			mapa.push(niveauMap);
			
			save.push(monstres);
			save.push(batiments);
			save.push(artefactMap);
			save.push(hero);
			save.push(mapa);

			var json = JSON.stringify(save);
			
			var a = document.getElementById('saveClick'); //or grab it by tagname etc
			a.href = '?save='+json;
			a.style = 'display: inline; float: left;';
			
		}
		
		
		
		
		
		
		
		
		
	 </script>
	 
</html>